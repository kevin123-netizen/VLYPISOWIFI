<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VLY PisoWiFi ‚Äî Auth & License</title>
  <style>
    :root{
      --primary:#0056b3;
      --primary-dark:#003d80;
      --bg:#ffffff;
      --fg:#222222;
    }
    body{margin:0;font-family:system-ui,Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .navbar{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#f7f7f9;border-bottom:1px solid #e6e6ee}
    .nav-links a{margin:0 6px;padding:8px 12px;border-radius:6px;text-decoration:none;color:var(--primary)}
    .nav-links a.active{background:var(--primary);color:#fff}
    button{cursor:pointer;background:var(--primary);color:#fff;border:0;border-radius:8px;padding:10px 14px;font-weight:600;transition:.2s}
    button:hover{background:var(--primary-dark)}
    section{display:none;opacity:0;transition:opacity .4s}
    section.active{display:block;opacity:1}
    .hero{text-align:center;padding:40px 16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin:24px auto;max-width:1000px;padding:0 16px}
    .card{background:#fff;border:1px solid #ddd;border-radius:12px;padding:18px;box-shadow:0 4px 10px rgba(0,0,0,.06)}
    #authSection{display:none;align-items:center;justify-content:center;min-height:calc(100vh - 100px)}
    #authSection input{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin:8px 0}
    #authSection button{width:100%;margin-top:10px}
    #notif{display:none;position:fixed;top:0;left:0;right:0;padding:12px;font-weight:700;text-align:center}
    footer{margin-top:40px;padding:16px;text-align:center;font-size:0.9em;color:#555;border-top:1px solid #eee;background:#f9f9fb}
  </style>
</head>
<body>
  <div id="notif"></div>

  <div class="navbar">
    <div class="brand">VLY PisoWiFi</div>
    <div class="nav-links">
      <a href="#" id="btnHome" onclick="showHome()">Home</a>
      <a href="#" id="btnLogin" onclick="showLogin()">Login</a>
      <a href="#" id="btnSignup" onclick="showSignup()">Sign Up</a>
      <a href="#" id="btnBuy" onclick="showAdmin()">Buy License</a>

      <!-- New buttons only appear after login -->
      <a href="#" id="btnWebsite" onclick="showWebsite()" style="display:none">Website</a>
      <a href="#" id="btnMachine" onclick="showMachine()" style="display:none">Machine Licensed</a>
      <a href="#" id="btnLicensed" onclick="showLicensed()" style="display:none">Licensed</a>
      <a href="#" id="btnSettings" onclick="showSettings()" style="display:none">Settings</a>

      <a href="#" id="btnLogout" onclick="logout()" style="display:none">Logout</a>
    </div>
  </div>

  <!-- HOME -->
  <section id="home" class="active">
    <div class="hero">
      <h2>Welcome to VLY PisoWiFi</h2>
      <p>Fast Internet, Secure Access, Admin Control & Easy Payments.</p>

      <!-- Contact info -->
      <p style="margin-top:20px;font-weight:bold;">
        üì± My Cellular Number: 09356290856 <br>
        üìß Email: kevinblaza816@gmail.com
      </p>

      <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:15px;">
        <button onclick="showAdmin()">Buy a License</button>
        <button onclick="showLogin()">Login</button>
        <button onclick="showSignup()">Sign Up</button>
      </div>
    </div>
    <div class="grid">
      <div class="card"><h3>‚ö° Fast Internet</h3><p>Enjoy reliable high-speed connectivity anytime.</p></div>
      <div class="card"><h3>üîí Secure Access</h3><p>Protect your network with token-based authentication.</p></div>
      <div class="card"><h3>üõ†Ô∏è Admin Control</h3><p>Manage users, licenses, and settings with ease.</p></div>
      <div class="card"><h3>üí≥ Easy Payments</h3><p>Convenient and hassle-free license purchasing.</p></div>
    </div>
  </section>

  <!-- AUTH -->
  <section id="authSection">
    <div style="width:100%;max-width:380px">
      <div id="login" class="card">
        <h3>Login</h3>
        <input id="username" placeholder="Username" />
        <input id="password" type="password" placeholder="Password" />
        <button onclick="doLogin()">Login</button>
        <div style="text-align:center;margin-top:10px">No account? <a href="#" onclick="showSignup()">Sign Up</a></div>
      </div>
      <div id="signup" class="card" style="display:none">
        <h3>Sign Up</h3>
        <input id="newUser " placeholder="Username" />
        <input id="newPass" type="password" placeholder="Password" />
        <button onclick="doSignup()">Create Account</button>
        <div style="text-align:center;margin-top:10px">Have an account? <a href="#" onclick="showLogin()">Login</a></div>
      </div>
    </div>
  </section>

  <!-- ADMIN (Buy License) -->
  <section id="adminUI" style="display:none">
    <div class="card">
      <h3>Buy License</h3>
      <button onclick="generateLicense()">Generate License</button>
      <pre id="licenseOut"></pre>
    </div>
  </section>

  <!-- NEW SECTIONS -->
  <section id="websiteUI" style="display:none">
    <div class="card">
      <h3>Website</h3>
      <p>This section links to your official VLY PisoWiFi site.</p>
      <a href="https://example.com" target="_blank"><button>Go to Website</button></a>
    </div>
  </section>

  <section id="machineUI" style="display:none">
    <div class="card">
      <h3>Machine Licensed</h3>
      <p>‚úÖ PisoWiFi Machine Licensed Successfully.</p>
      <p>You can manage machine settings and view device info here.</p>
    </div>
  </section>

  <section id="licensedUI" style="display:none">
    <div class="card">
      <h3>Your Licenses</h3>
      <button onclick="loadLicenses()">Refresh</button>
      <pre id="licenses"></pre>
    </div>
  </section>

  <section id="settingsUI" style="display:none">
    <div class="card">
      <h3>Account Settings</h3>
      <p><b>üì± My Cellular Number:</b> 09356290856</p>

      <label>Email for Verification:</label>
      <input id="email" placeholder="Your Email" />
      <button onclick="saveEmail()">Save Email</button>

      <br><br>
      <label>Change Password:</label>
      <input id="oldPass" type="password" placeholder="Old Password" />
      <input id="newPassChange" type="password" placeholder="New Password" />
      <button onclick="changePassword()">Change Password</button>
    </div>
  </section>

  <footer>
    ¬© 2025 VLY PisoWiFi | Powered by VoloyPlatform
  </footer>

<script>
  let currentUser  = localStorage.getItem("sessionUser ") || null;

  function showNotif(msg,type="success"){
    const n=document.getElementById("notif");
    n.textContent=msg;
    n.style.display="block";
    n.style.background=type==="error"?"#f8d7da":"#d4edda";
    n.style.color=type==="error"?"#721c24":"#155724";
    setTimeout(()=>n.style.display="none",3000);
  }

  function hideAll(){
    document.querySelectorAll("section").forEach(s=>{s.classList.remove("active");s.style.display="none"});
    document.getElementById("btnLogout").style.display=currentUser ?"inline-block":"none";
    document.getElementById("btnWebsite").style.display=currentUser ?"inline-block":"none";
    document.getElementById("btnMachine").style.display=currentUser ?"inline-block":"none";
    document.getElementById("btnLicensed").style.display=currentUser ?"inline-block":"none";
    document.getElementById("btnSettings").style.display=currentUser ?"inline-block":"none";
  }

  function showHome(){hideAll();document.getElementById("home").style.display="block";document.getElementById("home").classList.add("active");}
  function showLogin(){hideAll();document.getElementById("authSection").style.display="flex";document.getElementById("login").style.display="block";document.getElementById("signup").style.display="none";document.getElementById("authSection").classList.add("active");}
  function showSignup(){hideAll();document.getElementById("authSection").style.display="flex";document.getElementById("signup").style.display="block";document.getElementById("login").style.display="none";document.getElementById("authSection").classList.add("active");}
  function showAdmin(){if(!currentUser ){return showLogin();}hideAll();document.getElementById("adminUI").style.display="block";document.getElementById("adminUI").classList.add("active");}
  function showWebsite(){hideAll();document.getElementById("websiteUI").style.display="block";document.getElementById("websiteUI").classList.add("active");}
  function showMachine(){hideAll();document.getElementById("machineUI").style.display="block";document.getElementById("machineUI").classList.add("active");}
  function showLicensed(){if(!currentUser ){return showLogin();}hideAll();document.getElementById("licensedUI").style.display="block";document.getElementById("licensedUI").classList.add("active");loadLicenses();}
  function showSettings(){if(!currentUser ){return showLogin();}hideAll();document.getElementById("settingsUI").style.display="block";document.getElementById("settingsUI").classList.add("active");loadSettings();}

  function doSignup(){
    let u=document.getElementById("newUser ").value.trim();
    let p=document.getElementById("newPass").value;
    if(!u||!p) return showNotif("‚ùå Fill all fields","error");
    let users=JSON.parse(localStorage.getItem("users")||"{}");
    if(users[u]) return showNotif("‚ùå Username already exists","error");
    users[u]={pass:btoa(p),email:""};
    localStorage.setItem("users",JSON.stringify(users));
    showNotif("‚úÖ Account created");
    showLogin();
  }

  function doLogin(){
    let u=document.getElementById("username").value.trim();
    let p=document.getElementById("password").value;
    let users=JSON.parse(localStorage.getItem("users")||"{}");
    if(users[u] && users[u].pass===btoa(p)){
      currentUser =u;
      localStorage.setItem("sessionUser ",u);
      showNotif("‚úÖ Logged in");
      showAdmin();
    } else {
      showNotif("‚ùå Invalid credentials","error");
    }
  }

  function logout(){
    currentUser =null;
    localStorage.removeItem("sessionUser ");
    showHome();
    showNotif("‚úÖ Logged out");
  }

  function generateLicense(){
    if(!currentUser ) return;
    let licenses=JSON.parse(localStorage.getItem("licenses")||"{}");
    if(!licenses[currentUser ]) licenses[currentUser ]=[];
    let code="LIC-"+Math.random().toString(36).substring(2,10).toUpperCase();
    licenses[currentUser ].push(code);
    localStorage.setItem("licenses",JSON.stringify(licenses));
    document.getElementById("licenseOut").textContent=code;
    loadLicenses();
  }

  function loadLicenses(){
    if(!currentUser ) return;
    let licenses=JSON.parse(localStorage.getItem("licenses")||"{}");
    document.getElementById("licenses").textContent=JSON.stringify(licenses[currentUser ]||[],null,2);
  }

  function saveEmail(){
    let email=document.getElementById("email").value.trim();
    if(!email) return showNotif("‚ùå Enter a valid email","error");
    let users=JSON.parse(localStorage.getItem("users")||"{}");
    if(users[currentUser ]){
      users[currentUser ].email=email;
      localStorage.setItem("users",JSON.stringify(users));
      showNotif("‚úÖ Email saved");
    }
  }

  function loadSettings(){
    let users=JSON.parse(localStorage.getItem("users")||"{}");
    if(users[currentUser ]){
      document.getElementById("email").value = users[currentUser ].email || "kevinblaza816@gmail.com";
    } else {
      document.getElementById("email").value = "kevinblaza816@gmail.com";
    }
  }

  function changePassword(){
    let oldPass=document.getElementById("oldPass").value;
    let newPass=document.getElementById("newPassChange").value;
    let users=JSON.parse(localStorage.getItem("users")||"{}");
    if(users[currentUser ] && users[currentUser ].pass===btoa(oldPass)){
      users[currentUser ].pass=btoa(newPass);
      localStorage.setItem("users",JSON.stringify(users));
      showNotif("‚úÖ Password changed");
    } else {
      showNotif("‚ùå Old password incorrect","error");
    }
  }

  (function init(){
    if(currentUser ) document.getElementById("btnLogout").style.display="inline-block";
    hideAll();
    showHome();
  })();
</script>
</body>
</html>